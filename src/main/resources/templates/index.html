<!DOCTYPE html>
<html>
<body>
<div class="container">
<h1 style="text-align:center;">VoIP Server!</h1>
<p>All server information goes here.</p>
</div>
<div class="container">
    <p>
      Discover what fart you are! Simply enter the first letter of your name and the day of the month you were born! Ex: A 18
    </p>

    <input type="text" id="stdin"/>
    <p id="credits"></p>
    <form id="form">
      <button id="run">Run</button>
    </form>
    <code id="output"></code>

    <script>
    var run = document.getElementById("run");

    run.addEventListener("click", function (e) {

      e.preventDefault();

      var stdin = document.getElementById("stdin");
      var form = document.getElementById("form");
      var credits = document.getElementById("credits");
      var output = document.getElementById("output");

      output.innerHTML = "Loading...";

      console.log(stdin.value);

      var obj = {};
      obj["clientId"] = "356ce739a260e06fe9d14be71bf8975f";
      obj["clientSecret"] = "db4b076db1ca4344052487e8a8a1932ca42c3fef453d36bbdb43d26977919844";
      obj["script"] = "import java.util.Scanner;\r\nimport java.util.HashMap;\r\nclass test {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(\"Hello, World!\");\r\n\t\tnew Farts();\r\n\t}\r\n}\npublic class Farts {\r\n\tpublic Farts() {\t\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tString letter = scan.next().toUpperCase();\r\n\t\tint day = scan.nextInt();\r\n\r\n\t\tHashMap&lt;String, String&gt; letters = new HashMap&lt;String, String&gt;();\r\n\t\tletters.put(&quot;A&quot;, &quot;WRETCHED&quot;);\r\n\t\tletters.put(&quot;B&quot;, &quot;DEEPLY&quot;);\r\n\t\tletters.put(&quot;C&quot;, &quot;PHENOMENAL&quot;);\r\n\t\tletters.put(&quot;D&quot;, &quot;GROSSLY&quot;);\r\n\t\tletters.put(&quot;E&quot;, &quot;MONUMENTAL&quot;);\r\n\t\tletters.put(&quot;F&quot;, &quot;EXPLOSIVE&quot;);\r\n\t\tletters.put(&quot;G&quot;, &quot;UNEXPECTEDLY&quot;);\r\n\t\tletters.put(&quot;H&quot;, &quot;THICK&quot;);\r\n\t\tletters.put(&quot;I&quot;, &quot;TINY&quot;);\r\n\t\tletters.put(&quot;J&quot;, &quot;LONG&quot;);\r\n\t\tletters.put(&quot;K&quot;, &quot;GIGANTIC&quot;);\r\n\t\tletters.put(&quot;L&quot;, &quot;TREMENDOUS&quot;);\r\n\t\tletters.put(&quot;M&quot;, &quot;DANGEROUSLY&quot;);\r\n\t\tletters.put(&quot;N&quot;, &quot;CRAZY&quot;);\r\n\t\tletters.put(&quot;O&quot;, &quot;SCRAWNY&quot;);\r\n\t\tletters.put(&quot;P&quot;, &quot;BEAUTIFLY&quot;);\r\n\t\tletters.put(&quot;Q&quot;, &quot;ROTTENLY&quot;);\r\n\t\tletters.put(&quot;R&quot;, &quot;SPOOKY&quot;);\r\n\t\tletters.put(&quot;S&quot;, &quot;LUMPY&quot;);\r\n\t\tletters.put(&quot;T&quot;, &quot;MODERATELY&quot;);\r\n\t\tletters.put(&quot;U&quot;, &quot;HAPPY&quot;);\r\n\t\tletters.put(&quot;V&quot;, &quot;TROUBLESOME&quot;);\r\n\t\tletters.put(&quot;W&quot;, &quot;SAGGY&quot;);\r\n\t\tletters.put(&quot;X&quot;, &quot;HEARTY&quot;);\r\n\t\tletters.put(&quot;Y&quot;, &quot;BIG&quot;);\r\n\t\tletters.put(&quot;Z&quot;, &quot;LUXURIOUS&quot;);\r\n\r\n\t\tHashMap&lt;Integer, String&gt; days = new HashMap&lt;Integer, String&gt;();\r\n\t\tdays.put(1, &quot;SOUR&quot;);\r\n\t\tdays.put(2, &quot;GREAT&quot;);\r\n\t\tdays.put(3, &quot;OLD&quot;);\r\n\t\tdays.put(4, &quot;LOUD&quot;);\r\n\t\tdays.put(5, &quot;LITTLE&quot;);\r\n\t\tdays.put(6, &quot;EPIC&quot;);\r\n\t\tdays.put(7, &quot;WET&quot;);\r\n\t\tdays.put(8, &quot;DANK&quot;);\r\n\t\tdays.put(9, &quot;FAKE&quot;);\r\n\t\tdays.put(10, &quot;SENILE&quot;);\r\n\t\tdays.put(11, &quot;MUSTY&quot;);\r\n\t\tdays.put(12, &quot;SHARP&quot;);\r\n\t\tdays.put(13, &quot;DANGEROUS&quot;);\r\n\t\tdays.put(14, &quot;MONOTONE&quot;);\r\n\t\tdays.put(15, &quot;SQUEAKY&quot;);\r\n\t\tdays.put(16, &quot;NOISELESS&quot;);\r\n\t\tdays.put(17, &quot;ROTTEN&quot;);\r\n\t\tdays.put(18, &quot;FAT&quot;);\r\n\t\tdays.put(19, &quot;SOFT&quot;);\r\n\t\tdays.put(20, &quot;POTENT&quot;);\r\n\t\tdays.put(21, &quot;SUDDEN&quot;);\r\n\t\tdays.put(22, &quot;POWERFUL&quot;);\r\n\t\tdays.put(23, &quot;STRANGE&quot;);\r\n\t\tdays.put(24, &quot;STURDY&quot;);\r\n\t\tdays.put(25, &quot;FLAT&quot;);\r\n\t\tdays.put(26, &quot;FULL&quot;);\r\n\t\tdays.put(27, &quot;WINDY&quot;);\r\n\t\tdays.put(28, &quot;HORRID&quot;);\r\n\t\tdays.put(29, &quot;BEAUTIFUL&quot;);\r\n\t\tdays.put(30, &quot;HOT&quot;);\r\n\t\tdays.put(31, &quot;SILENT&quot;);\r\n\r\n\t\tSystem.out.println(&quot;You are a &quot; + letters.get(letter) + &quot; &quot;\r\n\t\t\t\t+ days.get(day) + &quot; FART&quot;);\r\n\t}\r\n}";
      obj["language"] = "java";
      obj["versionIndex"] = "0";
      obj["stdin"] = stdin.value;
      var jsonStr = JSON.stringify(obj);

      console.log(jsonStr);

      const proxyurl = "https://cors-anywhere.herokuapp.com/";
      const url = "https://api.jdoodle.com/v1/execute";
      fetch(proxyurl + url, {
        method: 'post',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: jsonStr
      })
      .then(response => {
        return response.json()
      })
      .then(data => {
        console.log(data);
        var outputStr = data.output;
        console.log(outputStr);
        var formattedOutput = outputStr.replace(/(?:\r\n|\r|\n)/g, '<br>');
        output.innerHTML = formattedOutput;
      })
      .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))

      const creditsUrl = "https://api.jdoodle.com/v1/credit-spent";
      fetch(proxyurl + creditsUrl, {
        method: 'post',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: jsonStr
      })
      .then(response => {
        return response.json()
      })
      .then(data => {
        console.log(data);
        var creditsLeft = 200 - data.used;
        console.log(credits);
        credits.innerHTML = "Runs left: " + creditsLeft;
      })
      .catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))




    });
    </script>
</div>
</body>
</html>
